{% extends "base.html" %}

{% block content %}

<h1>Exportation de mod√®les 3D vers Minecraft</h1>

<div class="msection">

<h1>Fichiers utilisables</h1>

<ul>
{%- for file in schemFiles|sort %}
	<li>{{ file }}</li>
{% endfor %}
</ul>

 <div id="mine_cmd"><b>Commande Minecraft :  </b><span id="mine_command">//schem load mcedit </span><span id="mine_file">&lt;filename&gt;</span></div>

</div>

{% if logged_in_player %}

<div class='msection'>

<h1>Envoyer un fichier</h1> 

<form class="form_schem" enctype="multipart/form-data" method="post" action="{{ url_for('upload_schematic') }}">
    <input type="file" id="schemLoader" name="schemLoader" accept=".schematic">
    <label for="schemLoader">
    	<span id="spanFile">Choisir un fichier</span>
    </label><button type="submit" id="sendSchemFile" disabled='true'><svg id="save_button" xmlns="http://www.w3.org/2000/svg" width="31" height="28" viewBox="0 0 30.8 28"><style>.a{fill:#fff}</style><g transform="matrix(0.24840608 0 0 0.24777994 0.37642834 0.3754795)" stroke-width="4"><path d="m118.5 86c-1.3-0.9-3-1.4-4.9-1.4H82.8 38.2 7.4c-1.9 0-3.6 0.5-4.9 1.4C1.2 86.9 0.5 88 0.5 89.3v15.6c0 1.3 0.7 2.4 2 3.3 1.3 0.9 3 1.4 4.9 1.4h106.2c1.9 0 3.6-0.5 4.9-1.4 1.3-0.9 2-2 2-3.3V89.3c0-1.3-0.7-2.4-2-3.3z" class="a"/><path d="m28.2 42h18.5v32.3c0 1.2 0.5 2.3 1.4 3.2 0.9 0.9 2 1.4 3.2 1.4h18.5c1.2 0 2.3-0.5 3.2-1.4 0.9-0.9 1.4-2 1.4-3.2V42h18.5c2 0 3.4-1 4.3-2.9 0.8-1.9 0.5-3.5-1-5L63.7 1.9C62.9 1 61.8 0.5 60.5 0.5 59.2 0.5 58.1 1 57.3 1.9L24.9 34.2c-1.5 1.4-1.8 3.1-1 5 0.8 1.9 2.2 2.9 4.3 2.9z" class="a"/></g></svg>
    </button>
</form>

<script>

document.getElementById("schemLoader").onchange = function(event){

  var input = document.getElementById("schemLoader");
  var fsend = document.getElementById("sendSchemFile");
  var finfo = document.getElementById("spanFile");

  schemFile = input.files[0];
  schemSize = schemFile.size/1024;

  if (schemSize > 64){
    fsend.disabled = true;
    finfo.style.color = "red";
    finfo.innerHTML = "fichier trop volumineux";
  } else {
    fsend.disabled = false;
    finfo.style.color = "black";
    finfo.innerHTML = schemFile.name + " (" + schemSize.toFixed(1) + " KiB)";
  }

};

</script>


</div>

{% endif %}

<script>

var files = document.querySelectorAll('ul li');
var filename = document.getElementById('mine_file');

console.log(files);

for(i = 0 ; i < files.length; i++){


 files[i].onmouseenter = function(e){
  
  filename.innerHTML = e.srcElement.innerHTML.split('.')[0];

 };

 files[i].onmouseleave = function(e){
  
  filename.innerHTML = "&lt;filename&gt;";

 };
}

</script>

{% endblock %}
